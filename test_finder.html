<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <title>资源加载错误监听示例</title>
  <style>
    .event-log-contents {
      border: 1px solid #ccc;
      padding: 10px;
      height: 120px;
      overflow-y: auto;
      white-space: pre-wrap;
      font-family: monospace;
      margin-top: 10px;
    }
    button {
      margin-top: 10px;
    }
    img {
      max-width: 300px;
      display: block;
      margin-top: 10px;
    }
  </style>
</head>
<body>
  <h2>资源加载错误事件监听示例</h2>

  <button id="load-resource">加载资源</button>

  <img id="resource-img" alt="加载的资源" />

  <div class="event-log-contents"></div>

  <script>
    const log = document.querySelector(".event-log-contents");
    const btnLoad = document.getElementById("load-resource");
    const img = document.getElementById("resource-img");

    // 监听img的load事件
    img.addEventListener("load", () => {
      log.textContent += "load: 资源加载成功\n";
      console.log("资源加载成功");
    });
    // 监听img的error事件
    img.addEventListener("error", (e) => {
      log.textContent += "error: 资源加载失败\n";
      console.error("资源加载失败", e);
    });

    btnLoad.addEventListener("click", () => {
      // 设置图片src为你的资源URL，触发加载
      img.src = "https://finder.video.qq.com/251/20350/stodownload?encfilekey=rjD5jyTuFrIpZ2ibE8T7YmwgiahniaXswqzzicEiawBjticmEqc9ua5M6nU4JafcF3IyALGGicDlLPlFAYwPIfpmwkibic9iblOKZMicJjicicgYDL5qPeu1A3DYZJyhicGg&hy=SH&idx=1&m=&scene=2&uzid=1&picformat=200&token=cztXnd9GyrFHsCMU8q7YEHIPuTud2OwT9mQjuH3FM9kGGffUX3KGOXGLH74djE2KBbmPSAlJDvvtAe6r0WlMB5JyEWDKic7G0QnjtiaOXGCwTIjTDsjNE7FiczTcgiciaTad3H8UX2YnNZ0qFAsppzEia65Vmny2Havxfd&ctsc=1-144&wxampicformat=501&picformat=200&picformat=200";
      log.textContent += "开始加载资源...\n";
    });
  </script>
</body>
</html>
