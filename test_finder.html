<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <title>图片加载错误监听示例</title>
  <style>
    .event-log-contents {
      border: 1px solid #ccc;
      padding: 10px;
      height: 120px;
      overflow-y: auto;
      white-space: pre-wrap;
      font-family: monospace;
      margin-top: 10px;
    }
    button {
      margin-top: 10px;
    }
    img {
      max-width: 300px;
      display: block;
      margin-top: 10px;
    }
  </style>
</head>
<body>
  <h2>图片加载错误监听示例</h2>

  <button id="load-resource">加载图片资源</button>

  <img id="resource-img" alt="加载的图片" />

  <div class="event-log-contents"></div>

  <script>
    const log = document.querySelector(".event-log-contents");
    const btnLoad = document.getElementById("load-resource");
    const img = document.getElementById("resource-img");

    img.addEventListener("load", () => {
      log.textContent += "load: 图片加载成功\n";
      console.log("图片加载成功");
    });
    img.addEventListener("error", (e) => {
      log.textContent += "error: 图片加载失败\n";
      console.error("图片加载失败", e);
    });

    btnLoad.addEventListener("click", () => {
      img.src = "https://finder.video.qq.com/251/20350/stodownload?encfilekey=rjD5jyTuFrIpZ2ibE8T7YmwgiahniaXswqzRTJZpGbTuRD6DQpl0HdLjv5Iia51RwJxKg6iafbLwT6UaqcZPrYYgSGYLVFrembe7VVOpsODQClibCcFg24PcaK2A&hy=SH&idx=1&m=&scene=2&uzid=1&picformat=200&token=x5Y29zUxcibCadRELU5qibEm8ibicB42qU9ibSHtialctpztTF3vJdCkeF57r9qRiaxvME68fOlnQrHlYCz2a1OeIS27jRQk30YVms0xsbQYSCKFJYXKQa8ryDcR0tR1QxnBXFV1VBYS7ibMLGibdPb77nTvC2H9SVnibab7sZ&ctsc=1-144&wxampicformat=501&picformat=200&picformat=200";
      log.textContent += "开始加载图片...\n";
    });
  </script>
</body>
</html>
